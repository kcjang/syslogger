-------------------------------------------------------------------------
# 프로그램 설명
-------------------------------------------------------------------------
syslogger는 쉘가드의 보조 프로그램이다.
역할은 UDP로 syslog 메시지를 Listen 하고 UDP 혹은 TCP로 메시지를 전달한다.


-------------------------------------------------------------------------
# 실행 파일 버전 확인
-------------------------------------------------------------------------
java -jar Syslogger.jar --version

-------------------------------------------------------------------------
# 설치 요구사항
-------------------------------------------------------------------------
JRE : JRE 11 이상 버전으로 사용한다.
자료실의 open jdk 를 사용하거나 다른 jdk, jre를 사용해도 된다.

JDK, JRE를 처음 설치하면 윈도우즈의 보안 요구사항을 만족하지 못하여 제대로 동작하지 않을수 있다.
이때는 서비스에 등록하기 전에 명령어를 직접 실행하여 보안 요구사항을 만족시키도록 한다.

> java -jar syslogger.jar

실행 이후엔 CTRL-X 로 종료시키고 서비스를 실행한다.

-------------------------------------------------------------------------
# service.xml
-------------------------------------------------------------------------
서비스 등록에 관련한 설정파일이다.
<service>
    <id>syslogger</id>
    <name>syslogger</name>
    <description>This runs syslogger as a Service.</description>
    <env name="SYSLOGGER_HOME" value="%BASE%"/>
    <executable>java</executable>
    <arguments>-Xmx256m -jar "%BASE%\syslogger.jar"</arguments>
    <logmode>rotate</logmode>
    <logpath>logs</logpath>
</service>

1. executable 에 java 명령을 적는다.
2. jre를 인스톨로로 설치하지 않아서 PATH 환경변수에 등록되어 있지 않다면
적당한 디렉토리에 복사하고 java 명령의 위치를 executable 에 적는다.

예) c:\syslogger\jre11 에 jre를 복사하였다면

<executable>c:\syslogger\jre11\bin\java</executable>

로 등록한다.

-------------------------------------------------------------------------
# syslogger.yml
-------------------------------------------------------------------------
1. 환경설정 파일은 syslogger.yml 이다.
  가. Listen 하는 udp 포트번호는 syslog.port 이다. 없을 경우 514 포트이다.

-------------------------------------------------------------------------
# list.cfg 
-------------------------------------------------------------------------

1. 읽어들인 syslog 메시지를 배포하는 목적지 주소목록이다.
2. 포맷은 PROTOCOL:IP:PORT:ENCODING 이다.
  가. PROTOCOL은 tcp 혹은 udp 이다.
  나. ENCODING은 생략할수 있다. 기본은 UTF-8 이다.
      만약 syslog receiver 가 다른 인코딩을 지원한다면 아래와 같이 바꾼다.  맨 마지막에 인코딩을 적는다.
          udp:192.168.0.158:514:euc-kr
3. #으로 시작하는 라인은 주석으로 인식하여 처리하지 않는다.
4. 포맷이 잘못되었을 경우 해당 라인을 로그에 적고 해당 라인을 SKIP한다. 
5. list.cfg를 수정할때는 프로그램을 중지하지 않아도 된다. 5초마다 해당 파일을 읽어서 적용한다.


-------------------------------------------------------------------------
# 서비스 등록 및 시작
-------------------------------------------------------------------------
1. 서비스 등록
./service install

2. 서비스 삭제
./service uninstall

3. 서비스 시작
./service start

4. 서비스 종료
./service stop

